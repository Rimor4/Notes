#### 实现思路

##### 1. `eval` 函数

`eval` 函数是 shell 的主程序，用于解析和解释用户输入的命令行。

- 首先调用 `parseline` 函数解析命令行，将命令和参数分割存入 `argv` 数组。
- 如果 `argv` 数组为空（即用户输入空命令行），直接返回。
- 如果命令是内建命令（如 `quit`、`jobs`、`bg`、`fg`），立即执行并返回。
- 否则，创建子进程执行外部命令。父进程根据命令是否在后台运行决定是否等待子进程完成。

##### 2. `builtin_cmd` 函数

`builtin_cmd` 函数用于识别和执行内建命令。

- 如果是 `quit` 命令，调用 `exit(0)` 退出 shell。
- 如果是 `jobs` 命令，调用 `listjobs` 列出所有后台作业。
- 如果是 `bg` 或 `fg` 命令，调用 `do_bgfg` 函数处理作业。
- 如果不是内建命令，返回 0，表示需要进一步处理。

##### 3. `do_bgfg` 函数

`do_bgfg` 函数用于处理 `bg` 和 `fg` 命令，将指定的作业切换到前台或后台运行。

- 首先检查命令参数，确保用户提供了作业 ID 或进程 ID。
- 根据参数是 JID 还是 PID，查找对应的作业。
- 如果作业不存在，打印错误信息并返回。
- 如果是 `bg` 命令，将作业状态设置为 `BG` 并发送 `SIGCONT` 信号。
- 如果是 `fg` 命令，将作业状态设置为 `FG`，发送 `SIGCONT` 信号，并调用 `waitfg` 等待前台作业完成。

##### 4. `waitfg` 函数

`waitfg` 函数用于等待前台作业完成。

- 使用 `sigsuspend` 循环检查当前前台作业是否完成（作业状态是否不再是 `FG`）。

##### 5. 信号处理函数

- `sigchld_handler`：处理 `SIGCHLD` 信号，回收所有已终止或停止的子进程。
- `sigint_handler`：处理 `SIGINT` 信号（如用户按 `Ctrl+C`），将信号转发给前台作业。
- `sigtstp_handler`：处理 `SIGTSTP` 信号（如用户按 `Ctrl+Z`），将信号转发给前台作业。